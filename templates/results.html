{% extends 'base.html' %}

{% block title %}Matbahak - Your Recipes{% endblock %}

{% block content %}
<div class="row">
    <div class="col-lg-10 offset-lg-1">

        <h1 class="main-headline text-center mb-4">Here's what you can make!</h1>
        
        {% if recipes %}
        
            <div class="row">

                {% for recipe in recipes %}
                <div class="col-md-6 mb-4">
                   <div class="card recipe-card">
                        <div class="card-body p-4 d-flex flex-column">
                            {% if session['user'] %}
                   
                    {% endif %}
                            
                            <h2 class="card-title recipe-card-title">{{ recipe.name }}</h2>
                            
                            <h5 class="card-subtitle my-3 recipe-card-subtitle">
                                <strong>Rating:</strong> {{ recipe.rating | default('Not Rated', true) }} stars
                                &nbsp;&SmallCircle;&nbsp;
                                <strong>Time:</strong> {{ recipe.TotalTime }} min
                                &nbsp;&SmallCircle;&nbsp;
                                <strong>Difficulty:</strong> {{ recipe.Difficulty }}
                            </h5>
                            
                            <div class="mt-auto pt-3 d-flex justify-content-between align-items-center" style="border-top: 1px solid #eee;">
                            <a href="{{ url_for('recipe_details', recipe_name=recipe.name) }}" class="btn btn-view">
                                View Recipe
                            </a>
                            {% if session['user'] %}
                            <form action="/add_favorite" method="POST" class="d-inline m-0">
                                <input type="hidden" name="recipe_name" value="{{ recipe.name }}">
                                <button type="submit" class="btn-favorite">
                                    &hearts;
                                </button>
                            </form>
                            {% endif %}
                        </div>

                        </div>
                    </div>
                </div>
                {% endfor %}

            </div>
        
        {% else %}
        
            <div class="alert alert-warning p-4" role="alert">
                <h2 class="alert-heading">No Recipes Found ðŸ˜¥</h2>
                <p>We couldn't find any recipes with your combination of ingredients and filters.</p>
                <hr>
                <p class="mb-0">Try searching again with fewer ingredients or "Any" for the filters.</p>
            </div>
            
        {% endif %}

        <div class="text-center mt-5">
            <a href="/" class="btn-nav btn-back">&larr; Back to Search</a>
        </div>

    </div>
</div>
{% endblock %}

{% block scripts %}{% endblock %}